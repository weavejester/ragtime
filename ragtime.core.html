<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>ragtime.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Ragtime</span> <span class="project-version">0.10.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ragtime</span></div></div></li><li class="depth-2 branch current"><a href="ragtime.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="ragtime.jdbc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jdbc</span></div></a></li><li class="depth-3"><a href="ragtime.jdbc.migrations.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migrations</span></div></a></li><li class="depth-2 branch"><a href="ragtime.next-jdbc.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>next-jdbc</span></div></a></li><li class="depth-2 branch"><a href="ragtime.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="ragtime.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="ragtime.reporter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reporter</span></div></a></li><li class="depth-2"><a href="ragtime.sql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sql</span></div></a></li><li class="depth-3"><a href="ragtime.sql.compiler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compiler</span></div></a></li><li class="depth-2"><a href="ragtime.strategy.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>strategy</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ragtime.core.html#var-applied-migrations"><div class="inner"><span>applied-migrations</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-into-index"><div class="inner"><span>into-index</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-migrate"><div class="inner"><span>migrate</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-migrate-all"><div class="inner"><span>migrate-all</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-rollback"><div class="inner"><span>rollback</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-rollback-last"><div class="inner"><span>rollback-last</span></div></a></li><li class="depth-1"><a href="ragtime.core.html#var-rollback-to"><div class="inner"><span>rollback-to</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">ragtime.core</h1><div class="doc"><pre class="plaintext">Functions for applying and rolling back migrations.
</pre></div><div class="public anchor" id="var-applied-migrations"><h3>applied-migrations</h3><div class="usage"><code>(applied-migrations store index)</code></div><div class="doc"><pre class="plaintext">List all migrations in the index that are applied to the database.
</pre></div></div><div class="public anchor" id="var-into-index"><h3>into-index</h3><div class="usage"><code>(into-index migrations)</code><code>(into-index index migrations)</code></div><div class="doc"><pre class="plaintext">Add migrations to a map, using their :id as the key.
</pre></div></div><div class="public anchor" id="var-migrate"><h3>migrate</h3><div class="usage"><code>(migrate store migration)</code></div><div class="doc"><pre class="plaintext">Apply a single migration to a data store.
</pre></div></div><div class="public anchor" id="var-migrate-all"><h3>migrate-all</h3><div class="usage"><code>(migrate-all store index migrations)</code><code>(migrate-all store index migrations options)</code></div><div class="doc"><pre class="plaintext">Migrate a data store with the supplied index and migration sequence. The
index matches IDs in the data store with their associated migrations. The
migrations should be a sequential collection in the order in which they
should be applied to the database.

An additional map of options may be supplied that contains the following
keys:

:strategy - defines what to do if there are conflicts between the migrations
            applied to the data store, and the migrations that need to be
            applied. The default strategy is ragtime.strategy/raise-error.

:reporter - a function that takes three arguments: the store, the operation
            (:up or :down) and the migration ID. The reporter is a
            side-effectful callback that can be used to print or report on
            the migrations as they are applied. The default reporter is
            ragtime.reporter/silent.</pre></div></div><div class="public anchor" id="var-rollback"><h3>rollback</h3><div class="usage"><code>(rollback store migration)</code></div><div class="doc"><pre class="plaintext">Rollback a migration already applied to the database.
</pre></div></div><div class="public anchor" id="var-rollback-last"><h3>rollback-last</h3><div class="usage"><code>(rollback-last store index)</code><code>(rollback-last store index n)</code><code>(rollback-last store index n options)</code></div><div class="doc"><pre class="plaintext">Rollback the last n migrations from the database, using the supplied
migration index. If n is not specified, only the very last migration is
rolled back.

Takes an option map that may include the :reporter key. See migrate-all.</pre></div></div><div class="public anchor" id="var-rollback-to"><h3>rollback-to</h3><div class="usage"><code>(rollback-to store index migration-id)</code><code>(rollback-to store index migration-id options)</code></div><div class="doc"><pre class="plaintext">Rollback to a specific migration ID, using the supplied migration index.

Takes an option map that may include the :reporter key. See migrate-all.</pre></div></div></div></body></html>